<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    
    <title>Struts2框架基本知识 | OctoberCafe&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
      <link rel="icon" href="/favicon.png">
    

    <link rel="stylesheet" href="/css/style.css">

    <link rel="stylesheet" href="/js/google-code-prettify/tomorrow-night-eighties.min.css">

  </head>

  <body>

<header>
	<a id="logo" href="/" title="OctoberCafe&#39;s Blog">
	<img src="/favicon.png" alt="OctoberCafe&#39;s Blog"></a>
	
	
		<!--搜索栏-->
		<i class="js-toggle-search iconfont icon-search"></i>


<form class="js-search search-form search-form--modal" method="get" action="http://gushi.li" role="search">
	<div class="search-form__inner">
		<div>
			<i class="iconfont icon-search"></i>
			<input class="text-input" placeholder="Enter Key..." type="search">
		</div>
	</div>
</form>
	

	
		<!--侧边导航栏-->
		<a id="nav-toggle" href="#"><span></span></a>

<nav>
	<div class="menu-top-container">
		<ul id="menu-top" class="menu">
			
				
				<li class="current-menu-item">
					<a href="http://weibo.com/OctoberCafe/" target="_blank">Weibo</a>
				</li>
			
		</ul>
	</div>
</nav>
	

</header>
<div class="m-header ">
	<section id="hero1" class="hero">
		<div class="inner">
		</div>
	</section>
	
		<figure class="top-image" data-enable=true></figure>
	
</div>

<!--文章列表-->
<div class="wrapper">
  
    <!--文章-->
<article>
	
  
    <h1 class="post-title" itemprop="name">
      Struts2框架基本知识
    </h1>
  

	<div class='post-body mb'>
		<h1 id="Struts2"><a href="#Struts2" class="headerlink" title="Struts2"></a>Struts2</h1><h4 id="1-Structs2框架"><a href="#1-Structs2框架" class="headerlink" title="1. Structs2框架"></a>1. Structs2框架</h4><p>-对servlet中的很多细节进行的一种封装,但是structs2框架可以做到servlet做不到的一些操作。</p>
<h4 id="2-使用strcuts2框架的步骤"><a href="#2-使用strcuts2框架的步骤" class="headerlink" title="2. 使用strcuts2框架的步骤"></a>2. 使用strcuts2框架的步骤</h4><h5 id="1-创建web项目"><a href="#1-创建web项目" class="headerlink" title="1.  创建web项目"></a>1.  创建web项目</h5><h5 id="2-在lib下加入struts2的jar包"><a href="#2-在lib下加入struts2的jar包" class="headerlink" title="2. 在lib下加入struts2的jar包"></a>2. 在lib下加入struts2的jar包</h5><h5 id="3-在web-xml中添加核心过滤器-过滤器filter"><a href="#3-在web-xml中添加核心过滤器-过滤器filter" class="headerlink" title="3. 在web.xml中添加核心过滤器,过滤器filter"></a>3. 在web.xml中添加核心过滤器,过滤器filter</h5><ul>
<li>在web.xml中添加</li>
</ul>
<pre><code>&lt;filter&gt;
&lt;filter-name&gt;struts2&lt;/filter-name&gt;
&lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;
  &lt;/filter&gt;
  &lt;filter-mapping&gt;
&lt;filter-name&gt;struts2&lt;/filter-name&gt;
&lt;url-pattern&gt;*.action&lt;/url-pattern&gt;
&lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;
&lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;
  &lt;/filter-mapping&gt;
  &lt;filter-mapping&gt;
&lt;filter-name&gt;struts2&lt;/filter-name&gt;
&lt;url-pattern&gt;*.jsp &lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;
</code></pre><h5 id="4-在src下配置struts-xml"><a href="#4-在src下配置struts-xml" class="headerlink" title="4. 在src下配置struts.xml"></a>4. 在src下配置struts.xml</h5><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE struts PUBLIC
&quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;
&quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;
&lt;struts&gt;
        &lt;package name=&quot;cms-package&quot; extends=&quot;struts-default&quot;&gt;
                &lt;!-- 
        &lt;constant name=&quot;struts.objectFactory&quot; value=&quot;spring&quot; /&gt;
        &lt;constant name=&quot;struts.ognl.allowStaticMethodAccess&quot; value=&quot;true&quot; /&gt;
        &lt;constant name=&quot;struts.multipart.saveDir&quot; value=&quot;/tmp&quot;&gt;&lt;/constant&gt;

    &lt;interceptors&gt;
            &lt;interceptor name=&quot;auth&quot; class=&quot;com.briup.exam.web.interceptor.AuthInterceptor&quot;&gt;&lt;/interceptor&gt;
            &lt;interceptor-stack name=&quot;cmsAuthStack&quot;&gt;
                &lt;interceptor-ref name=&quot;auth&quot;&gt;&lt;/interceptor-ref&gt;
                &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;
            &lt;/interceptor-stack&gt;
        &lt;/interceptors&gt;

        &lt;global-results&gt;
            &lt;result name=&quot;toLogin&quot;&gt;
            /WEB-INF/jsp/login.jsp&lt;/result&gt;
        &lt;/global-results&gt; --&gt;
    &lt;/package&gt;
&lt;/struts&gt;
</code></pre><h5 id="5-创建前端页面用于访问struts的action"><a href="#5-创建前端页面用于访问struts的action" class="headerlink" title="5. 创建前端页面用于访问struts的action"></a>5. 创建前端页面用于访问struts的action</h5><ul>
<li><p>可以用一个登陆的name和password进行参数传递的测试</p>
<pre><code> &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;
pageEncoding=&quot;UTF-8&quot;%&gt;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;
&lt;title&gt;Insert title here&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;form action=&quot;saveUser.action&quot; method=&quot;post&quot;&gt;
        用户名:&lt;input type=&quot;text&quot; name=&quot;user.name&quot;&gt;&lt;br&gt;
        密码:&lt;input type=&quot;password&quot; name=&quot;user.password&quot;&gt;&lt;br&gt;
        &lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;
        &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></li>
</ul>
<h5 id="6-创建action"><a href="#6-创建action" class="headerlink" title="6. 创建action"></a>6. 创建action</h5><p> 注解配置action的命名空间<br>    package-info.java<br>    @Namespace(“/“)<br>    @ParentPackage(“struts-default”)<br>    package package name;<br>    import org.apache.struts2.convention.annotation.Namespace;<br>    import org.apache.struts2.convention.annotation.ParentPackage;</p>
<pre><code>class XXAction extends ActionSupport{
@Action(value=&quot;/xx&quot;,
    results={@Result(
    //利用jQuery中的$进行匹配，对符合js文件中的要求的页面进行匹配
    name=&quot;SUCCESS&quot;,location=&quot;/WEB-INF/jsp/${parentDriect}/${specifyUrl}&quot;)})
        public String  test(){
            return SUCCESS;
        }
    }
</code></pre><h5 id="7-使用监听器"><a href="#7-使用监听器" class="headerlink" title="7. 使用监听器"></a>7. 使用监听器</h5><ul>
<li>监听器的实例化</li>
</ul>
<pre><code>class XXListener implements ServletContextListener{
    public void contextInitialized(ServletContextEvent arg0) {
    // TODO Auto-generated method stub
    //获取到容器，从容器中获取Service层的对象
    //    WebApplicationContext context = WebApplicationContextUtils.getWebApplicationContext(arg0.getServletContext());
    //    XXService service1 = (xxService) context.getBean(&quot;XXServiceImpl&quot;);
    ServletContext app = arg0.getServletContext();
        }
    }
</code></pre><ul>
<li>客户端重定向 redirect redirectAction与服务器内部跳转  dispatcher  chain\测试</li>
<li><p>IndexAction.java</p>
<pre><code>package com.briup.web.action;

import org.apache.struts2.convention.annotation.Action;
import org.apache.struts2.convention.annotation.Result;

import com.opensymphony.xwork2.ActionSupport;
//action

public class IndexAction extends ActionSupport{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    @Action(value=&quot;/toIndex&quot;,
            results={
    @Result(name=&quot;SUCCESS&quot;,location=&quot;/WEB-INF/jsp/index.jsp&quot;)})//对index的注解，注解名字是toIndex在部署之后可以通过访问toIndex进行访问
    public String toIndex(){
        System.out.println(&quot;in to index..&quot;);
        return &quot;SUCCESS&quot;;
    }
}
</code></pre></li>
</ul>
<ul>
<li>要新建一个名叫package-info的文件继承struts默认的类</li>
<li><pre><code>@Namespace(&quot;/&quot;)
@ParentPackage(&quot;struts-default&quot;)
package com.briup.web.action;
import org.apache.struts2.convention.annotation.Namespace;
import org.apache.struts2.convention.annotation.ParentPackage;
</code></pre></li>
</ul>

	</div>
	<div class="meta split">
		
			<span>本文总阅读量 <span id="busuanzi_value_page_pv"></span> 次</span>
		
		<time class="post-date" datetime="2017-08-29T17:13:17.000Z" itemprop="datePublished">2017-08-30</time>
	</div>
</article>

<!--评论-->

	
<div class="ds-thread" data-thread-key="Struts2框架初初识" data-title="Struts2框架基本知识" data-url="http://yoursite.com/2017/08/30/Struts2框架初初识/"></div>
<script type="text/javascript">

var duoshuoQuery = {short_name:"yumemor"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
</script>


  
</div>


  <svg id="bigTriangleColor" width="100%" height="40" viewBox="0 0 100 102" preserveAspectRatio="none">
    <path d="M0 0 L50 100 L100 0 Z"></path>
  </svg>

  


  <div class="wrapper"></div>





<div class="fat-footer">
	<div class="wrapper">
		<div class="layout layout--center">
			<div class="layout__item palm-mb">
				<div class="media">
					<img class="headimg" src='http://oct8d1mqf.bkt.clouddn.com/2016-10-17-15%3A42%3A28.jpg' alt='OctoberCafe'>
					<div class="media__body">
						<h4>OctoberCafe&#39;s Blog</h4>
						<p class='site-description'></p>
					</div>
				</div>
				<div class="author-contact">
					<ul>
						
							
							<li>
				        		<a href="http://weibo.com/OctoberCafe/" target="_blank">
				        			
				        				<i class="iconfont icon-weibo"></i>
				        			
				        		</a>
				        	</li>
						
							
							<li>
				        		<a href="https://github.com/OctoberCafe" target="_blank">
				        			
				        				<i class="iconfont icon-github"></i>
				        			
				        		</a>
				        	</li>
						
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>

<footer class="footer" role="contentinfo">
	<div class="wrapper wrapper--wide split split--responsive">
		
			<span>本站总访问量 <span id="busuanzi_value_site_pv"></span> 次, 访客数 <span id="busuanzi_value_site_uv"></span> 人次</span>
		
		<span>Theme by <a href="http://github.com/yumemor">Yumemor</a>. Powered by <a href="http://hexo.io">Hexo</a></span>
	</div>
</footer>

	<!-－这里导入了 lib.js 里面涵盖了 jQuery 等框架 所以注释掉-->
	<!--<script src="http://lib.sinaapp.com/js/jquery/2.0/jquery.min.js"></script>-->
	<script src="/js/lib.js"></script>
	<script src="/js/google-code-prettify/prettify.js"></script>
	<script src="/js/module.js"></script>
	<script src="/js/script.js"></script>
	
		<script async src="http://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
	<script type='text/javascript'>
		//代码高亮
		$(document).ready(function(){
	 		$('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
   			prettyPrint();
		});
	</script>
	</body>
</html>
