<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="SpringIOC:依赖注入（控制翻转）步骤1. 导入Jar包2. 创建类进行注入3. 创建xx.xml文件4. 可以读取配置文件获取到实体对象ApplicationContext ac = 
new ClassPathXmlApplicationContext(&amp;quot;spring-servi">
    

    <!--Author-->
    
        <meta name="author" content="OctoberCafe">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Spring初识"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="OctoberCafe&#39;s Blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

        <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>Spring初识 - OctoberCafe&#39;s Blog</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    


    <!-- favicon -->
    
	
</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Configurable Title</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags">
                            
                                Tags
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories">
                            
                                Categories
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="https://github.com/klugjo/hexo-theme-clean-blog">
                            
                                <i class="fa fa-github fa-stack-2x"></i>
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('http://www.codeblocq.com/assets/projects/hexo-theme-clean-blog/img/home-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Spring初识</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        
                            2017-08-30
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           
                <div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags">
                    
                        


<a href="/tags/JavaWeb/">#JavaWeb</a>


                    
                </div>
                <div class="col-lg-4 col-md-5 post-categories">
                    
                </div>
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><h2 id="IOC-依赖注入（控制翻转）"><a href="#IOC-依赖注入（控制翻转）" class="headerlink" title="IOC:依赖注入（控制翻转）"></a>IOC:依赖注入（控制翻转）</h2><h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><h4 id="1-导入Jar包"><a href="#1-导入Jar包" class="headerlink" title="1. 导入Jar包"></a>1. 导入Jar包</h4><h4 id="2-创建类进行注入"><a href="#2-创建类进行注入" class="headerlink" title="2. 创建类进行注入"></a>2. 创建类进行注入</h4><h4 id="3-创建xx-xml文件"><a href="#3-创建xx-xml文件" class="headerlink" title="3. 创建xx.xml文件"></a>3. 创建xx.xml文件</h4><h4 id="4-可以读取配置文件获取到实体对象"><a href="#4-可以读取配置文件获取到实体对象" class="headerlink" title="4. 可以读取配置文件获取到实体对象"></a>4. 可以读取配置文件获取到实体对象</h4><pre><code>ApplicationContext ac = 
new ClassPathXmlApplicationContext(&quot;spring-service.xml&quot;);
</code></pre><h3 id="ioc中的实体对象获取"><a href="#ioc中的实体对象获取" class="headerlink" title="ioc中的实体对象获取"></a>ioc中的实体对象获取</h3><h4 id="1-通过new对象相互调用-Dao-service-action-serviced的方式"><a href="#1-通过new对象相互调用-Dao-service-action-serviced的方式" class="headerlink" title="1.通过new对象相互调用(Dao service action serviced的方式)"></a>1.通过new对象相互调用(Dao service action serviced的方式)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> * Student student =<span class="keyword">new</span> Student();		 </div><div class="line">student.setName(<span class="string">"zhangsan"</span>);</div><div class="line">student.setTeacher(<span class="keyword">new</span> Teacher(<span class="string">"jack"</span>));		</div><div class="line">System.out.println(student+<span class="string">" "</span>+student.getName()+<span class="string">" "</span>+student.getTeacher());*/</div></pre></td></tr></table></figure>
<h4 id="2-使用spring-xml文件中则可以实现直接进行调用-实体类的属性必须写set方法"><a href="#2-使用spring-xml文件中则可以实现直接进行调用-实体类的属性必须写set方法" class="headerlink" title="2.使用spring.xml文件中则可以实现直接进行调用(实体类的属性必须写set方法)"></a>2.使用spring.xml文件中则可以实现直接进行调用(实体类的属性必须写set方法)</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"tea"</span> <span class="attr">class</span>=<span class="string">"com.briup.ioc.Teacher"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"jack"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"stu"</span> <span class="attr">class</span>=<span class="string">"com.briup.ioc.Student"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"zhangsan"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"teacher"</span> <span class="attr">ref</span>=<span class="string">"tea"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="student类中name属性的student的set方法"><a href="#student类中name属性的student的set方法" class="headerlink" title="student类中name属性的student的set方法"></a>student类中name属性的student的set方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">	<span class="keyword">this</span>.name = name;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="进行测试"><a href="#进行测试" class="headerlink" title="进行测试"></a>进行测试</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"spring-service.xml"</span>);</div><div class="line">	Student student = (Student) ac.getBean(<span class="string">"stu"</span>);</div><div class="line">	Teacher teacher = student.getTeacher();</div><div class="line">	<span class="comment">/*System.out.println(student +" "+student.getName());</span></div><div class="line"><span class="comment">	System.out.println(teacher+" "+teacher.getName());</span></div></pre></td></tr></table></figure>
<h5 id="在这里必须将之前的xml进行配置的部分删除掉，更换成"><a href="#在这里必须将之前的xml进行配置的部分删除掉，更换成" class="headerlink" title="在这里必须将之前的xml进行配置的部分删除掉，更换成"></a>在这里必须将之前的xml进行配置的部分删除掉，更换成</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.briup.ioc"</span> /&gt;</span></div><div class="line">	<span class="comment">&lt;!--这里的com.briup.ioc是包名--&gt;</span></div></pre></td></tr></table></figure>
<h4 id="3-用-Component和-Autowired进行注解"><a href="#3-用-Component和-Autowired进行注解" class="headerlink" title="3. 用@Component和@Autowired进行注解"></a>3. 用@Component和@Autowired进行注解</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Component</span>(<span class="string">"stu"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</div><div class="line"><span class="keyword">private</span> String name;</div><div class="line"><span class="meta">@Autowired</span></div><div class="line"><span class="keyword">private</span> Teacher teacher;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">()</span> </span>&#123;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="可以将-Component更换成-Repository、-Serviceh或者-Controller-Autowired可以更换成-Resource，但是在调用的时候必须写成小写不能修成别名"><a href="#可以将-Component更换成-Repository、-Serviceh或者-Controller-Autowired可以更换成-Resource，但是在调用的时候必须写成小写不能修成别名" class="headerlink" title="可以将@Component更换成@Repository、@Serviceh或者@Controller;@Autowired可以更换成@Resource，但是在调用的时候必须写成小写不能修成别名"></a>可以将@Component更换成@Repository、@Serviceh或者@Controller;@Autowired可以更换成@Resource，但是在调用的时候必须写成小写不能修成别名</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Student student = (Student) ac.getBean(<span class="string">"student"</span>);</div><div class="line"><span class="comment">//这里的student对应Student的类   不能换成其他的名称或者实例化的对象</span></div></pre></td></tr></table></figure>
<h3 id="ioc中的annotation配置"><a href="#ioc中的annotation配置" class="headerlink" title="ioc中的annotation配置"></a>ioc中的annotation配置</h3><p>  <strong>@Autowired</strong></p>
<ol>
<li>@Autowired默认按照byType匹配的方式进行注入,如果没有一个bean的类型是匹配的则会抛异常,如果有多个bean的类型都匹配成功了,那么再按byName方式进行选择</li>
<li>@Autowired注解可以写在成员变量、setter方法、构造器函数上面</li>
<li>@Autowired如果最终匹配不成功(注意一定是一个都没有找到的情况)则会抛出异常,但是如果设置为 @Autowired(required=false),则最终匹配不成功没有不会抛出异常。</li>
<li>@Autowired可以结合 @Qualifier(“beanName”)来使用,则可以达到byName的效果</li>
<li>@Autowired使用后需要在xml文件加入以下配置才能生效:<context:annotation-config>   </context:annotation-config></li>
</ol>
<p><strong>@Resource</strong></p>
<ol>
<li><p>@Resource的作用和@Autowired差不多,只不过 @Resource是默认先用byName,如果找不到合适的就再用byType来注入</p>
</li>
<li><p>@Resource有俩个属性,name和type,使用name属性则表示要byName匹配,使用type属性则表示要byType匹配</p>
</li>
<li><p>@Resource使用后需要在xml文件加入以下配置才能生效:</p>
 <figure class="highlight verilog"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="keyword">context</span>:annotation-<span class="keyword">config</span>/&gt;</div></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>@PostConstruct 和 @PreDestroy</strong></p>
<ol>
<li>标注了@PostConstruct注释的方法将在类实例化后调用。</li>
<li>标注了 @PreDestroy的方法将在类销毁之前调用。</li>
</ol>
<p><strong>@Component</strong></p>
<ol>
<li><p>@Component注解可以直接定义bean，而无需在xml定义。但是若两种定义同时存在，xml中的定义会覆盖类中注解的Bean定义。</p>
</li>
<li><p>@Component注解直接写在类上面即可</p>
</li>
<li><p>@Component有一个可选的参数，用于指定 bean 的名称: @Component(“boss”)</p>
</li>
<li><p>@Component容易不指定参数，则 bean 的名称为当前类的类名小写</p>
</li>
<li><p>@Component使用之后需要在xml文件配置一个标签:<br> <code>&lt;context:component-scan/&gt;</code></p>
</li>
<li><p>xml的context标签<br> <code>&lt;context:component-scan base-package=&quot;com.briup.ioc.annotation&quot; /&gt;</code><br> 可以表示spring需要检查哪个包下的java类,看它们是否使用了 @Component注解</p>
</li>
<li><p>@Component定义的bean默认情况下都是单例模式的,如果要让这个bean变为非单例,可以再结合这个 @Scope 注解来达到目标 @Scope(“prototype”)</p>
</li>
<li><p>@Component是Spring中所有bean组件的通用形式, @Repository @Service @Controller 则是 @Component的细化,用来表示更具体的用例，分别对应了持久化层、服务层和表现层。但是至少到现在为止这个四种注解的实质区别很小(甚至几乎没有),都是把当前类注册为spring容器中的一个bean</p>
</li>
</ol>
<p><strong>注意</strong></p>
<p>component-scan标签默认情况下自动扫描指定路径下的包（含所有子包），将带有@Component @Repository、@Service、@Controller标签的类自动注册到spring容器。对标记了Spring中的@Required、@Autowired、@PostConstruct、@PreDestroy、@Resource、@WebServiceRef、@EJB、@PersistenceContext、@PersistenceUnit等注解的类进行对应的操作使注解生效（包含了annotation-config标签的作用）</p>
<h3 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h3><h5 id="Spring-Service-xml"><a href="#Spring-Service-xml" class="headerlink" title="Spring-Service.xml"></a>Spring-Service.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line"><span class="tag">	<span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span> </span></div><div class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></div><div class="line"><span class="tag">	<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span> </span></div><div class="line"><span class="tag">	<span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></div><div class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></div><div class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></div><div class="line"><span class="tag"><span class="string">     http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span></span></div><div class="line"><span class="tag"><span class="string">     http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd</span></span></div><div class="line"><span class="tag"><span class="string">     http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd</span></span></div><div class="line"><span class="tag"><span class="string">     http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd"</span>&gt;</span></div><div class="line">	 <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.briup.ioc"</span> /&gt;</span></div><div class="line">		</div><div class="line">	 <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"tea"</span> <span class="attr">class</span>=<span class="string">"com.briup.ioc.Teacher"</span>&gt;</span></div><div class="line">	 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"jack"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	 <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	 <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"stu"</span> <span class="attr">class</span>=<span class="string">"com.briup.ioc.Student"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"zhangsan"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"teacher"</span> <span class="attr">ref</span>=<span class="string">"tea"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="Student-java"><a href="#Student-java" class="headerlink" title="Student.java"></a>Student.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.briup.ioc;</div><div class="line"><span class="keyword">import</span> javax.annotation.Resource;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</div><div class="line"></div><div class="line"><span class="comment">//@Component</span></div><div class="line"><span class="comment">//@Repository</span></div><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="comment">//@Controller</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line"><span class="comment">//@Autowired</span></div><div class="line">	<span class="meta">@Resource</span></div><div class="line">	<span class="keyword">private</span> Teacher teacher;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">()</span> </span>&#123;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">		<span class="keyword">super</span>();</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> name;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> Teacher <span class="title">getTeacher</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> teacher;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTeacher</span><span class="params">(Teacher teacher)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.teacher = teacher;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="Teacher-java"><a href="#Teacher-java" class="headerlink" title="Teacher.java"></a>Teacher.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.briup.ioc;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line">	<span class="keyword">private</span> Teacher teacher;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Teacher</span><span class="params">()</span> </span>&#123;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Teacher</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> name;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> Teacher <span class="title">getTeacher</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> teacher;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTeacher</span><span class="params">(Teacher teacher)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.teacher = teacher;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="IOCTest-java"><a href="#IOCTest-java" class="headerlink" title="IOCTest.java"></a>IOCTest.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.briup.ioc;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IOCTest</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">/*  实例化对象获取实例的方法</span></div><div class="line"><span class="comment">		 * Student stu =new Student();</span></div><div class="line"><span class="comment">		stu.setName("zhangsan");</span></div><div class="line"><span class="comment">		stu.setTeacher(new Teacher("jack"));</span></div><div class="line"><span class="comment">		</span></div><div class="line"><span class="comment">		System.out.println(student+" "+student.getName()+" "+student.getTeacher());</span></div><div class="line"><span class="comment">		*/</span></div><div class="line">		</div><div class="line">		<span class="comment">//读取Spring-Service.xml文件</span></div><div class="line">		ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"spring-service.xml"</span>);</div><div class="line">		</div><div class="line">		Student student = (Student) ac.getBean(<span class="string">"student"</span>);</div><div class="line">		Teacher teacher = student.getTeacher();</div><div class="line">	</div><div class="line">		<span class="comment">/*System.out.println(student +" "+student.getName());</span></div><div class="line"><span class="comment">		System.out.println(teacher+" "+teacher.getName());</span></div><div class="line"><span class="comment">		*/</span></div><div class="line">		System.out.println(student+<span class="string">"   "</span>+teacher);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="AOP面向切面的编程"><a href="#AOP面向切面的编程" class="headerlink" title="AOP面向切面的编程"></a>AOP面向切面的编程</h2><ul>
<li>几个概念名词：切面 、切入点、连接点、织入、目标对象、代理对象</li>
</ul>
<h3 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h3><ul>
<li><p>代理模式是常用的Java设计模式，它的特征是代理类与委托类有同样的接口，代理类主要负责为委托类预处理消息、过滤消息、把消息转发给委托类，以及事后处理消息等。</p>
</li>
<li><p>代理类与委托类之间通常会存在关联关系，一个代理类的对象与一个委托类的对象关联，代理类的对象本身并不真正实现服务，而是通过调用委托类的对象的相关方法，来提供特定的服务。</p>
</li>
<li><p><strong>注意</strong><br>委托类对象就是我们后面说到的 目标对象(需要【被】代理的对象)<br>代理类对象就是我们后面说到的 代理对象(目标对象就是需要这个对象做为代理)</p>
</li>
</ul>
<h3 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h3><ul>
<li>与静态代理类对照的是动态代理类，动态代理类的字节码在程序运行时由Java反射机制动态生成，无需程序员手工编写它的源代码。动态代理类不仅简化了编程工作，而且提高了软件系统的可扩展性，因为Java反射机制可以生成任意类型的动态代理类。java.lang.reflect 包下面的Proxy类和InvocationHandler 接口提供了生成动态代理类的能力。\</li>
</ul>
<p><strong><em>例子</em></strong></p>
<h5 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IStudentService</span></span>&#123;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">save</span><span class="params">(Student s)</span></span>;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">long</span> id)</span></span>;</div><div class="line">	</div><div class="line">	<span class="function">Student <span class="title">find</span><span class="params">(<span class="keyword">long</span> id)</span></span>;	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="日志类"><a href="#日志类" class="headerlink" title="日志类"></a>日志类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line">	 <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentLogger</span> </span>&#123;</div><div class="line">		</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">log</span><span class="params">(String msg)</span></span>&#123;</div><div class="line">			System.out.println(<span class="string">"log: "</span>+msg);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	   &#125;</div><div class="line">```	   </div><div class="line">##### 实现类</div><div class="line">``` Java</div><div class="line">	   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentServiceImpl</span> <span class="keyword">implements</span> <span class="title">IStudentService</span> </span>&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">long</span> id)</span> </span>&#123;</div><div class="line">			<span class="comment">// 记录日志</span></div><div class="line">			System.out.println(<span class="string">"student is deleted..."</span>);</div><div class="line">		&#125;</div><div class="line">	</div><div class="line">		<span class="function"><span class="keyword">public</span> Student <span class="title">find</span><span class="params">(<span class="keyword">long</span> id)</span> </span>&#123;</div><div class="line">			<span class="comment">// 记录日志</span></div><div class="line">			System.out.println(<span class="string">"student is found..."</span>);</div><div class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">		&#125;</div><div class="line">	</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(Student s)</span> </span>&#123;</div><div class="line">			<span class="comment">// 记录日志</span></div><div class="line">			System.out.println(<span class="string">"student is saved..."</span>);</div><div class="line">		&#125;</div><div class="line">	   &#125;</div><div class="line">	   </div><div class="line">	   <span class="comment">//InvocationHandler接口的实现类,java的动态代理中需要使用</span></div><div class="line">	   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</div><div class="line">		<span class="comment">//目标对象</span></div><div class="line">		<span class="keyword">private</span> Object target; </div><div class="line">		<span class="keyword">private</span> StudentLogger logger = <span class="keyword">new</span> StudentLogger();</div><div class="line">	</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="title">MyHandler</span><span class="params">()</span> </span>&#123;</div><div class="line">		&#125;</div><div class="line">	</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="title">MyHandler</span><span class="params">(Object target)</span> </span>&#123;</div><div class="line">			<span class="keyword">this</span>.target = target;</div><div class="line">		&#125;</div><div class="line">	</div><div class="line">		<span class="comment">// 参数1 将来所产生的代理对象 Proxy4$</span></div><div class="line">		<span class="comment">// 参数2 将来需要调用到的目标对象里面真正的那个方法的镜像</span></div><div class="line">		<span class="comment">// 参数3 将来调用方法的时候所传的参数</span></div><div class="line">		<span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method m, Object[] args)</span></span></div><div class="line"><span class="function">				<span class="keyword">throws</span> Throwable </span>&#123;</div><div class="line">			<span class="comment">// 获得将来所调用方法的名字</span></div><div class="line">			String methodName = m.getName();</div><div class="line">			<span class="comment">// 用日志记录输出一下</span></div><div class="line">			logger.log(methodName + <span class="string">" is invoked..."</span>);</div><div class="line">			<span class="comment">// 用反射的方式去调用将来需要真正调用的方法.</span></div><div class="line">			Object o = m.invoke(target, args);</div><div class="line">	</div><div class="line">			<span class="keyword">return</span> o;</div><div class="line">		&#125;</div><div class="line">		get/set</div><div class="line">		....</div><div class="line">	   &#125;</div><div class="line">```	 </div><div class="line"></div><div class="line">##### main测试类</div><div class="line">``` Java</div><div class="line">		<span class="comment">//目标对象</span></div><div class="line">		IStudentService service = <span class="keyword">new</span> StudentServiceImpl();</div><div class="line">		<span class="comment">//service是我们的目标对象。</span></div><div class="line">		<span class="comment">//我们要给目标对象产生代理对象。</span></div><div class="line">		<span class="comment">//目标对象service只能单独执行delete方法。</span></div><div class="line">		<span class="comment">//但是我们需要的是:先执行log日志方法再执行delete方法。</span></div><div class="line">		<span class="comment">//目标对象service做不到这个要求,所以我们要给目标对象service</span></div><div class="line">		<span class="comment">//生成一个代理对象去完成这俩个操作.</span></div><div class="line">	</div><div class="line">	</div><div class="line">		<span class="comment">//怎么给目标对象生成代理对象:</span></div><div class="line">		<span class="comment">//JDK动态代理的方式</span></div><div class="line">	</div><div class="line">		<span class="comment">//获得目标对象的Class对象</span></div><div class="line">		Class c = service.getClass();</div><div class="line">		<span class="comment">//获得目标对象的类加载器对象</span></div><div class="line">		ClassLoader classLoader = c.getClassLoader();</div><div class="line">	</div><div class="line">		<span class="comment">//获得目标对象所实现的所有接口</span></div><div class="line">		Class[] interfaces = c.getInterfaces();</div><div class="line">	</div><div class="line">		<span class="comment">//获得一个InvocationHandler接口的实现类对象,并把目标对象传进去</span></div><div class="line">		InvocationHandler h = </div><div class="line">				<span class="keyword">new</span> MyHandler(service);</div><div class="line">	</div><div class="line">		<span class="comment">//参数1 目标对象的类加载器对象</span></div><div class="line">		<span class="comment">//参数2 目标对象所实现的所有接口. Class类型数组</span></div><div class="line">		<span class="comment">//参数3 InvocationHandler接口的实现类对象</span></div><div class="line">		IStudentService proxy = </div><div class="line">			(IStudentService)Proxy.newProxyInstance</div><div class="line">			(classLoader, interfaces, h);</div><div class="line">		<span class="comment">//这里的proxy是一个实现了IStudentService接口动态生成的代理类的对象</span></div><div class="line">		proxy.delete();</div></pre></td></tr></table></figure>
<h3 id="完整测试代码"><a href="#完整测试代码" class="headerlink" title="完整测试代码"></a>完整测试代码</h3><h4 id="IStudentService-java"><a href="#IStudentService-java" class="headerlink" title="IStudentService.java"></a>IStudentService.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.briup.aop;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IStudentService</span> </span>&#123;</div><div class="line">     <span class="function"><span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">long</span> id)</span></span>;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="动态代理-1"><a href="#动态代理-1" class="headerlink" title="动态代理"></a>动态代理</h3><h5 id="AroundAdvice-java"><a href="#AroundAdvice-java" class="headerlink" title="AroundAdvice.java"></a>AroundAdvice.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.briup.aop.around;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.aopalliance.intercept.MethodInterceptor;</div><div class="line"><span class="keyword">import</span> org.aopalliance.intercept.MethodInvocation;</div><div class="line"><span class="keyword">import</span> org.xml.sax.SAXException;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.State;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AroundAdvice</span> <span class="keyword">implements</span> <span class="title">MethodInterceptor</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> MyLogger logger;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(MethodInvocation mi)</span> <span class="keyword">throws</span> Throwable </span>&#123;</div><div class="line">		<span class="comment">// mi.getMethod()获得将来要调用的方法的镜像</span></div><div class="line">		<span class="comment">//在目标方法执行之前做日志</span></div><div class="line">		logger.log(mi.getMethod().getName() + <span class="string">" is start..."</span>);</div><div class="line">		</div><div class="line">		<span class="comment">// 这个方法就是用来调用目标对象中的方法的</span></div><div class="line">		Object returnValue = mi.proceed();</div><div class="line">		</div><div class="line">		<span class="comment">//在目标方法执行之后做日志</span></div><div class="line">		logger.log(mi.getMethod().getName() + <span class="string">" is end..."</span>);</div><div class="line"></div><div class="line">		<span class="keyword">return</span> returnValue;</div><div class="line">	&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> MyLogger <span class="title">getLogger</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> logger;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLogger</span><span class="params">(MyLogger logger)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.logger = logger;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="MyLogger-java"><a href="#MyLogger-java" class="headerlink" title="MyLogger.java"></a>MyLogger.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.briup.aop.around;</div><div class="line"><span class="comment">//日志类</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLogger</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">log</span><span class="params">(String msg)</span></span>&#123;</div><div class="line">		System.out.println(<span class="string">"log:"</span>+msg);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="UserService"><a href="#UserService" class="headerlink" title="UserService"></a>UserService</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.briup.aop.around;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</div><div class="line">		<span class="function"><span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="UserServiceImpl-java"><a href="#UserServiceImpl-java" class="headerlink" title="UserServiceImpl.java"></a>UserServiceImpl.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.briup.aop.around;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		System.out.println(<span class="string">"in userService save.."</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="AOPTest-java"><a href="#AOPTest-java" class="headerlink" title="AOPTest.java"></a>AOPTest.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.briup.aop.around;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AOPTest</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		</div><div class="line">		System.out.println(<span class="string">"aop.around running....."</span>);</div><div class="line">ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"spring-service.xml"</span>);</div><div class="line">	</div><div class="line"><span class="comment">//获取代理对象</span></div><div class="line">	UserService service =(UserService) ac.getBean(<span class="string">"proxy"</span>);</div><div class="line">		service.save();</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="静态代理"><a href="#静态代理" class="headerlink" title="静态代理"></a>静态代理</h3><h5 id="MyHandler-java"><a href="#MyHandler-java" class="headerlink" title="MyHandler.java"></a>MyHandler.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.briup.aop.jdk;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</div><div class="line"><span class="keyword">import</span> java.lang.reflect.Method;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyHandler</span>  <span class="keyword">implements</span> <span class="title">InvocationHandler</span></span>&#123;</div><div class="line">	<span class="comment">//目标对象</span></div><div class="line">		<span class="keyword">private</span> Object target; </div><div class="line">		<span class="keyword">private</span> StudentLogger logger = <span class="keyword">new</span> StudentLogger();</div><div class="line"></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="title">MyHandler</span><span class="params">()</span> </span>&#123;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="title">MyHandler</span><span class="params">(Object target)</span> </span>&#123;</div><div class="line">			<span class="keyword">this</span>.target = target;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 参数1 将来所产生的代理对象 Proxy4$</span></div><div class="line">		<span class="comment">// 参数2 将来需要调用到的目标对象里面真正的那个方法的镜像</span></div><div class="line">		<span class="comment">// 参数3 将来调用方法的时候所传的参数</span></div><div class="line">		<span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method m, Object[] args)</span></span></div><div class="line"><span class="function">				<span class="keyword">throws</span> Throwable </span>&#123;</div><div class="line">			<span class="comment">// 获得将来所调用方法的名字</span></div><div class="line">			String methodName = m.getName();</div><div class="line">			<span class="comment">// 用日志记录输出一下</span></div><div class="line">			logger.log(methodName + <span class="string">" is invoked..."</span>);</div><div class="line">			<span class="comment">// 用反射的方式去调用将来需要真正调用的方法.</span></div><div class="line">			Object o = m.invoke(target, args);</div><div class="line"></div><div class="line">			<span class="keyword">return</span> o;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="function"><span class="keyword">public</span> Object <span class="title">getTarget</span><span class="params">()</span> </span>&#123;</div><div class="line">			<span class="keyword">return</span> target;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTarget</span><span class="params">(Object target)</span> </span>&#123;</div><div class="line">			<span class="keyword">this</span>.target = target;</div><div class="line">		&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="StudentLogger-java"><a href="#StudentLogger-java" class="headerlink" title="StudentLogger.java"></a>StudentLogger.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.briup.aop.jdk;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentLogger</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">log</span><span class="params">(String msg)</span></span>&#123;</div><div class="line">		System.out.println(<span class="string">"log: "</span>+msg);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="StudentServiceImpl-java"><a href="#StudentServiceImpl-java" class="headerlink" title="StudentServiceImpl.java"></a>StudentServiceImpl.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.briup.aop.jdk;</div><div class="line"><span class="keyword">import</span> com.briup.aop.IStudentService;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentServiceImpl</span> <span class="keyword">implements</span> <span class="title">IStudentService</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		</div><div class="line">		System.out.println(<span class="string">"in  save..."</span>);</div><div class="line">		</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">long</span> id)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		System.out.println(<span class="string">"in deleting..."</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h4 id="spring的作用"><a href="#spring的作用" class="headerlink" title="spring的作用"></a>spring的作用</h4><ul>
<li>不用new Dao层的对象,直接将dao层对象注入service层,通过读取spring-service.xml文件便可读取实体对象。</li>
</ul>
<h4 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h4><ul>
<li><p>String Struts Hibernae的结合</p>
</li>
<li><p>分别对应action/servlet层、serivce 层和 dao 层</p>
</li>
<li><p>配置struts2的核心部分是添加过滤器</p>
</li>
</ul>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    
                        <li>
                            <a href="https://github.com/klugjo/hexo-theme-clean-blog" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2017 OctoberCafe<br></p>
                <p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p>
                <p class="copyright text-muted">Adapted for <a target="_blank" href="https://hexo.io/">Hexo</a> by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>